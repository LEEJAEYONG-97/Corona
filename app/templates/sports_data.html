{% extends "base.html" %}

{% block title %}
    Sports Data 분석
{% endblock %}

{% block content %}
<div class="container-fluid px-4">
    <h1 class="mt-4">Sports Data 분석</h1>

    <!-- 월별 누적 확진자 수와 관중수 차트 -->
    <div class="row">
        <div class="col-xl-12">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    월별 확진자 수 및 관중수
                </div>
                <div class="card-body">
                    <canvas id="covidAttendanceChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 코로나 이미지 삽입 -->
    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    대한민국 COVID19 흐름
                </div>
                <div class="card-body text-center">
                    <img src="/static/images/covid_flow.jpg" alt="COVID-19 Flow" class="img-fluid" />
                </div>
            </div>
        </div>

        <!-- 조직별 무관중 경기 수 차트 -->
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    협회별 무관중 경기 수
                </div>
                <div class="card-body">
                    <canvas id="noAudienceChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 협회별 월별 관중수 차트 -->
    <div class="row">
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    KBL 월별 관중수
                </div>
                <div class="card-body">
                    <canvas id="KBLChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    WKBL 월별 관중수
                </div>
                <div class="card-body">
                    <canvas id="WKBLChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    KBO 월별 관중수
                </div>
                <div class="card-body">
                    <canvas id="KBOChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    KLEAGUE 월별 관중수
                </div>
                <div class="card-body">
                    <canvas id="KLEAGUEChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    
        <div class="col-xl-6">
            <div class="card mb-4">
                <div class="card-header">
                    KOVO 월별 관중수
                </div>
                <div class="card-body">
                    <canvas id="KOVOChart" width="100%" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>    

    <!-- 차트 데이터를 전달 -->
    <div id="chart-data"
        data-months-covid='{{ months_covid | tojson }}'
        data-cases='{{ cases | tojson }}'
        data-months-attendance='{{ months_attendance | tojson }}'
        data-attendance='{{ attendance | tojson }}'
        data-organizations='{{ organizations | tojson }}'
        data-no-attendance-games='{{ no_attendance_games | tojson }}'
        data-months-attendance='{{ months_attendance | tojson }}'
        data-monthly-attendance-by-association='{{ monthly_attendance_by_association | tojson }}'>
    </div>
</div>

<!-- Chart.js 라이브러리 -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4"></script>

<!-- Sports 차트 스크립트 파일 -->
<script src="/static/js/sports_chart.js"></script>

<!-- 조직별 무관중 차트 스크립트 파일 -->
<script src="/static/js/no_audience_chart.js"></script>

<!-- 협회별 월별 관중수 차트 스크립트 파일 -->
<script src="/static/js/association_chart.js"></script>

{% endblock %}